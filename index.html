<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>”®–Ω–¥—ñ—Ä—ñ—Å—Ç—ñ–∫ –µ—Å–µ–ø—Ç–µ—Ä –±–∞“ì–¥–∞—Ä–ª–∞–º–∞—Å—ã</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{font-family:Arial;background:#0f172a;color:white;padding:20px}
.container{max-width:900px;margin:auto;background:#111827;padding:20px;border-radius:12px}
input,select,button{padding:10px;margin:6px;width:100%;border-radius:6px;border:none}
button{background:#22c55e;color:black;font-weight:bold}
.hidden{display:none}
h2,h3{color:#22c55e}
</style>
</head>

<body>

<div class="container">

<!-- –¢–Ü–†–ö–ï–õ–£ -->
<div id="loginBox">
<h2>üîê –¢—ñ—Ä–∫–µ–ª—É (–ö—ñ—Ä—É)</h2>
<input id="userName" placeholder="–ê—Ç—ã-–∂”©–Ω—ñ">
<input id="userPass" type="password" placeholder="“ö“±–ø–∏—è —Å”©–∑">
<button onclick="login()">–ö—ñ—Ä—É</button>
</div>

<!-- –ù–ï–ì–Ü–ó–ì–Ü “ö–û–°–´–ú–®–ê -->
<div id="app" class="hidden">

<h2>üìö –°–∞–ª–∞–ª–∞—Ä–¥—ã —Ç–∞“£–¥–∞—É</h2>
<select id="sector" onchange="showSector()">
<option value="">–°–∞–ª–∞–Ω—ã —Ç–∞“£–¥–∞“£—ã–∑</option>
<option value="eng">1Ô∏è‚É£ –ò–Ω–∂–µ–Ω–µ—Ä–ª—ñ–∫ ”©–Ω–¥—ñ—Ä—ñ—Å</option>
<option value="build">2Ô∏è‚É£ “ö“±—Ä—ã–ª—ã—Å</option>
<option value="elec">3Ô∏è‚É£ –≠–ª–µ–∫—Ç—Ä–∏–∫–∞</option>
<option value="eco">4Ô∏è‚É£ –≠–∫–æ–Ω–æ–º–∏–∫–∞</option>
</select>

<!-- 1. –ò–Ω–∂–µ–Ω–µ—Ä–ª—ñ–∫ -->
<div id="eng" class="hidden">
<h3>‚öô –ò–Ω–∂–µ–Ω–µ—Ä–ª—ñ–∫ ”©–Ω–¥—ñ—Ä—ñ—Å</h3>
<input id="prodPower" placeholder="”®–Ω–¥—ñ—Ä—ñ—Å “õ—É–∞—Ç—ã (–∫–í—Ç)">
<input id="elecEnergy" placeholder="–≠–ª–µ–∫—Ç—Ä —ç–Ω–µ—Ä–≥–∏—è—Å—ã (–∫–í—Ç/—Å–∞“ì)">
<button onclick="calcEng()">–ï—Å–µ–ø—Ç–µ—É</button>
</div>

<!-- 2. “ö“±—Ä—ã–ª—ã—Å -->
<div id="build" class="hidden">
<h3>üèó “ö“±—Ä—ã–ª—ã—Å</h3>
<input id="concreteVol" placeholder="–ë–µ—Ç–æ–Ω –∫”©–ª–µ–º—ñ (–º¬≥)">
<input id="materialQty" placeholder="–ú–∞—Ç–µ—Ä–∏–∞–ª –º”©–ª—à–µ—Ä—ñ (—Ç–æ–Ω–Ω–∞)">
<button onclick="calcBuild()">–ï—Å–µ–ø—Ç–µ—É</button>
</div>

<!-- 3. –≠–ª–µ–∫—Ç—Ä–∏–∫–∞ -->
<div id="elec" class="hidden">
<h3>‚ö° –≠–ª–µ–∫—Ç—Ä–∏–∫–∞</h3>
<input id="currentI" placeholder="–¢–æ–∫ I (–ê–º–ø–µ—Ä)">
<input id="voltageU" placeholder="–ö–µ—Ä–Ω–µ—É U (–í–æ–ª—å—Ç)">
<button onclick="calcElec()">–ï—Å–µ–ø—Ç–µ—É</button>
</div>

<!-- 4. –≠–∫–æ–Ω–æ–º–∏–∫–∞ -->
<div id="eco" class="hidden">
<h3>üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞</h3>
<input id="costPrice" placeholder="”®–∑—ñ–Ω–¥—ñ–∫ “õ“±–Ω (—Ç–µ“£–≥–µ)">
<input id="profitVal" placeholder="–ü–∞–π–¥–∞ (—Ç–µ“£–≥–µ)">
<button onclick="calcEco()">–ï—Å–µ–ø—Ç–µ—É</button>
</div>

<!-- –ù”ò–¢–ò–ñ–ï -->
<h3>üìä –ï—Å–µ–ø—Ç–µ—É –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä—ñ</h3>
<div id="result"></div>

<canvas id="chart"></canvas>

<button onclick="saveData()">üíæ –°–∞“õ—Ç–∞—É</button>
<button onclick="exportCSV()">üìÅ CSV —ç–∫—Å–ø–æ—Ä—Ç</button>
<button onclick="exportPDF()">üìÑ PDF —ç–∫—Å–ø–æ—Ä—Ç</button>

</div>
</div>

<script>
let results=[];

// –¢–Ü–†–ö–ï–õ–£
function login(){
 let name=document.getElementById("userName").value;
 let pass=document.getElementById("userPass").value;

 if(name=="" || pass==""){
   alert("–ê—Ç—ã-–∂”©–Ω—ñ –º–µ–Ω “õ“±–ø–∏—è —Å”©–∑–¥—ñ –µ–Ω–≥—ñ–∑!");
   return;
 }

 document.getElementById("loginBox").classList.add("hidden");
 document.getElementById("app").classList.remove("hidden");
}

// –°–ê–õ–ê–õ–ê–†–î–´ –ö”®–†–°–ï–¢–£
function showSector(){
 document.querySelectorAll("#eng,#build,#elec,#eco").forEach(x=>x.classList.add("hidden"));
 let s=document.getElementById("sector").value;
 if(s) document.getElementById(s).classList.remove("hidden");
}

// 1Ô∏è‚É£ –ò–Ω–∂–µ–Ω–µ—Ä–ª—ñ–∫ –µ—Å–µ–ø
function calcEng(){
 let p=+prodPower.value;
 let e=+elecEnergy.value;
 let eff=(p/e)*100;
 addResult("–ò–Ω–∂–µ–Ω–µ—Ä–ª—ñ–∫ —Ç–∏—ñ–º–¥—ñ–ª—ñ–∫ = "+eff.toFixed(2)+" %");
}

// 2Ô∏è‚É£ “ö“±—Ä—ã–ª—ã—Å –µ—Å–µ–ø
function calcBuild(){
 let c=+concreteVol.value;
 let m=+materialQty.value;
 let ratio=c/m;
 addResult("–ë–µ—Ç–æ–Ω/–º–∞—Ç–µ—Ä–∏–∞–ª “õ–∞—Ç—ã–Ω–∞—Å—ã = "+ratio.toFixed(2));
}

// 3Ô∏è‚É£ –≠–ª–µ–∫—Ç—Ä–∏–∫–∞ –µ—Å–µ–ø
function calcElec(){
 let i=+currentI.value;
 let u=+voltageU.value;
 let p=i*u;
 addResult("“ö—É–∞—Ç P = "+p+" –í—Ç");
}

// 4Ô∏è‚É£ –≠–∫–æ–Ω–æ–º–∏–∫–∞ –µ—Å–µ–ø
function calcEco(){
 let c=+costPrice.value;
 let p=+profitVal.value;
 let margin=(p/c)*100;
 addResult("–ü–∞–π–¥–∞ –º–∞—Ä–∂–∞—Å—ã = "+margin.toFixed(2)+" %");
}

// –ù”ò–¢–ò–ñ–ï “ö–û–°–£
function addResult(text){
 results.push(text);
 document.getElementById("result").innerHTML=results.join("<br>");
 drawChart();
}

// –ì–†–ê–§–ò–ö
function drawChart(){
 let ctx=document.getElementById("chart");
 new Chart(ctx,{
  type:"bar",
  data:{
   labels:results.map((_,i)=>"–ù”ô—Ç–∏–∂–µ "+(i+1)),
   datasets:[{label:"–ï—Å–µ–ø—Ç–µ—Ä",data:results.map((_,i)=>i+1)}]
  }
 });
}

// –°–ê“ö–¢–ê–£ (–±—Ä–∞—É–∑–µ—Ä–¥–µ)
function saveData(){
 localStorage.setItem("industrial_results",JSON.stringify(results));
 alert("–ù”ô—Ç–∏–∂–µ–ª–µ—Ä —Å–∞“õ—Ç–∞–ª–¥—ã!");
}

// CSV —ç–∫—Å–ø–æ—Ä—Ç
function exportCSV(){
 let csv=results.join("\n");
 let blob=new Blob([csv],{type:"text/csv"});
 let a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="esepter.csv";
 a.click();
}

// PDF —ç–∫—Å–ø–æ—Ä—Ç
function exportPDF(){
 const {jsPDF}=window.jspdf;
 let pdf=new jsPDF();
 results.forEach((r,i)=>pdf.text(r,10,10+i*10));
 pdf.save("esepter.pdf");
}
</script>

</body>
</html>
